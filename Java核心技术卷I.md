# 第1章 Java程序设计概述
## 1.1 Java程序设计平台

Java是一个完整的平台，有一个庞大的库，其中包含了很多可重用的代码，以及一个提供诸如安全性、跨操作系统的可移植性以及自动垃圾收集等服务的执行环境。
## 1.2 Java“白皮书”的关键术语
### 1.2.1 简单性
### 1.2.2 面向对象
### 1.2.3 分布式

Java有一个丰富的例程库，用于处理像HTTP和FTP之类的TCP/IP协议。Java应用程序能够通过URL打开和访问网络上的对象，其便捷程度就好像访问本地文件一样。
### 1.2.4 健壮性
### 1.2.5 安全性

Java要适用于网络/分布式环境。为了实现这个目标，安全性颇受重视。使用Java可以构建防病毒、防篡改的系统。

从一开始，Java就设计成能够防范各种攻击，其中包括：

（1）运行时堆栈溢出，这是蠕虫和病毒常用的攻击手段。

（2）破坏自己的进程空间之外的内存。

（3）未经授权读写文件。

原先，Java对下载代码的态度是“尽管来吧！”。不可信代码在一个沙箱环境中执行，在这里它不会影响主系统。用户可以确信不会发生不好的事情，因为Java代码不论来自哪里，都不能脱离沙箱。

不过，Java的安全模型很复杂。Java开发包（JDK）的第一版发布之后不久，普林斯顿大学的一些安全专家就发现一些小bug会允许不可信的代码攻击主系统。

最初，安全bug可以快速修复。遗憾的是，经过一段时间之后，黑客已经很擅长找出安全体系结构实现中的小漏洞。Sun以及之后的Oracle为不断修复bug经历了一段很是艰难的日子。

遭遇多次高调攻击之后，浏览器开发商和Oracle开始越来越谨慎。Java浏览器插件不再信任远程代码，除非代码有数字签名而且用户同意执行这个代码。

现在看来，尽管Java安全模型没有原先预想的那么成功，但Java在那个时代确实相当超前。微软提供了一种与之竞争的代码交付机制，其安全性完全依赖于数字签名。显然这是不够的，因为微软自身产品的任何用户都可以证实，一些知名开发商的程序确实会崩溃并对系统产生危害。
### 1.2.6 体系结构中立

编译器生成一个体系结构中立的目标文件格式，这是一种编译过的代码，只要有Java运行时系统，这些编译后的代码可以在许多处理器上运行。Java编译器通过生成与特定的计算机体系结构无关的字节码指令来实现这一特性。精心设计的字节码不仅可以很容易地在任何机器上解释执行，而且还可以动态地转换成本地机器代码。
### 1.2.7 可移植性

除了与用户界面有关的部分外，所有其他Java库能很好地支持平台独立性。你可以处理文件、正则表达式、XML、日期和时间、数据库、网络连接、线程等，而不用操心底层操作系统。不仅程序是可移植的，Java API往往也比原生API质量更高。
### 1.2.8 解释型

Java解释器可以在任何移植了解释器的机器上直接执行Java字节码。由于连接是一个增量式且轻量级的过程，所以，开发过程也变得更加快捷，更加具有探索性。
### 1.2.9 高性能

即时编译器可以监控哪些代码频繁执行，并优化这些代码以提高速度。更为复杂的优化是消除函数调用（即“内联”）。即时编译器知道哪些类已经加载。基于当前加载的类集合，如果一个特定的函数不会被覆盖，就可以使用内联。必要时，还可以撤销这种优化。
### 1.2.10 多线程
### 1.2.11 动态性

从很多方面来看，Java与C或C++相比更加具有动态性。它能够适应不断发展的环境。库中可以自由地添加新方法和实例变量，而对客户端却没有任何影响。在Java中找出运行时类型信息十分简单。
## 1.3 Java applet与Internet

这里的想法很简单：用户从Internet下载Java字节码，并在自己的机器上运行。在网页中运行的Java程序称为applet。要使用applet，只需要一个启用Java的Web浏览器，它会为你执行字节码。不需要安装任何软件。任何时候只要访问包含applet的网页，都会得到程序的最新版本。最重要的是，要感谢虚拟机的安全性，它让我们不必担心来自恶意代码的攻击。

在网页中插入一个applet就如同在网页中嵌入一幅图片。applet会成为页面的一部分。文本环绕在applet所占据的空间周围。关键的一点是，这个图片是活动的。它可以对用户命令做出响应，改变外观，在运行它的计算机与提供它的计算机之间交换数据。
## 1.4 Java发展简史
## 1.5 关于Java的常见误解
# 第2章 Java程序设计环境
## 2.1 安装Java开发工具包
### 2.1.1 下载JDK
### 2.1.2 设置JDK
### 2.1.3 安装库源文件和文档
## 2.2 使用命令行工具

javac程序是一个Java编译器，它将文件Welcome.java编译成Welcome.class。java程序启动Java虚拟机，虚拟机执行编译器编译到类文件中的字节码。

编译器需要一个文件名（Welcome.java），而运行程序时，只需要指定类名（Welcome），不要带扩展名.java或.class。
## 2.3 使用集成开发环境
## 2.4 JShell

Java 9引入了另一种使用Java的方法。JShell程序提供了一个”读取-计算-打印循环”。键入一个Java表达式；JShell会评估你的输入，打印结果，等待你的下一个输入。
# 第3章 Java的基本程序设计结构
## 3.1 一个简单的Java应用程序

源代码的文件名必须与公共类的名字相同，并用.java作为扩展名。

运行已编译的程序时，Java虚拟机总是从指定类中的main方法的代码开始执行，因此为了代码能够执行，在类的源文件中必须包含一个main方法。
## 3.2 注释

在Java中，有3种标记注释的方式。最常用的方式是使用//，其注释内容从//开始到本行结尾。

当需要更长的注释时，既可以在每行的注释前面标记//，也可以使用/\*和\*/注释界定符将一段比较长的注释括起来。（在Java中，/\* \*/注释不能嵌套。也就是说，不能简单地把代码用/\*和\*/括起来作为注释，因为这段代码本身可能也包含一个\*/界定符。

最后，第3种注释可以用来自动地生成文档。这种注释以/\*\*开始，以\*/结束。
## 3.3 数据类型
### 3.3.1 整型

| 类型 | 存储需求 | 取值范围 |
| :-: | :-: | :-: |
| int | 4字节 | -2147483648\~2147483647 |
| short | 2字节 | -32768\~32767 |
| long | 8字节 | -9223372036854775808\~9223372036854775807 |
| byte | 1字节 | -128\~127 |

长整型数值有一个后缀L或l（如4000000000L）。十六进制数值有一个前缀0x或0X（如0xCAFE）。八进制有一个前缀0，例如，010对应十进制中的8。很显然，八进制表示法比较容易混淆，所以建议最好不要使用八进制常数。

从Java 7开始，加上前缀0b或0B就可以写二进制数。例如，0b1001就是9。另外，同样是从Java 7开始，还可以为数字字面量加下划线，如用1_000_000（或0b1111_0010_0100_0000）表示100万。这些下划线只是为了让人更易读。Java编译器会去除这些下划线。
### 3.3.2 浮点类型

| 类型 | 存储需求 | 取值范围 |
| :-: | :-: | :-: |
| float | 4字节 | 大约±3.40282347E+38F（有效位数为6\~7位）|
| double | 8字节 | 大约±1.79769313486231570E+308（有效位数为15位）|

double表示这种类型的数值精度是float类型的两倍（有人称之为双精度数值）。在很多情况下，float类型的精度（6\~7位有效数字）并不能满足需求。实际上，只有很少的情况适合使用float类型，例如，需要单精度数的库，或者需要存储大量数据时。

float类型的数值有一个后缀F或f（例如，3.14F）。没有后缀F的浮点数值（如3.14）总是默认为double类型。当然，也可以在浮点数值后面添加后缀D或d（例如，3.14D）。

可以使用十六进制表示浮点数值。例如，0.125可以表示成0x1.0p-3。在十六进制表示法中，使用p表示指数，而不是e。（e是一个十六进制数位。）注意，尾数采用十六进制，指数采用十进制。指数的基数是2，而不是10。

所有的浮点数值计算都遵循IEEE 754规范。一个正整数除以0的结果为正无穷大。计算0/0或者负数的平方根结果为NaN。

不能如下检测一个特定值是否等于Double.NaN：

```java
if (x == Double.NaN)  // is never true
```

所有“非数值”的值都认为是不相同的。不过，可以使用Double.isNaN方法来判断：

```java
if (Double.isNaN(x))  // check whether x is "not a number"
```

浮点数值不适用于无法接受舍入误差的金融计算。例如，命令System.out.println(2.0-1.1)将打印出0.8999999999999999，而不是人们期望的0.9。这种舍入误差的主要原因是浮点数值采用二进制系统表示，而在二进制系统中无法精确地表示分数1/10。这就好像十进制无法精确地表示分数1/3一样。如果在数值计算中不允许有任何舍入误差，就应该使用BigDecimal类。
